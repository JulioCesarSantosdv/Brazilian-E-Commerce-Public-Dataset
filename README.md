<h1>Análise Estratégica: E-commerce Olist</h1>

<blockquote>
<p><strong>Problema:</strong> Empresa de e-commerce com R$ 16,57M em vendas precisa otimizar performance comercial, reduzir tempo de entrega e aumentar retenção de clientes</p>
<p><strong>Solução:</strong> 3 dashboards estratégicos com análise de 101.720 pedidos e 95.420 clientes</p>
<p><strong>Resultado:</strong> Identificados <strong>150 clientes "Campeões"</strong> (LTV 3x maior), <strong>oportunidades de redução de 34% em atrasos</strong> e <strong>5 categorias responsáveis por 40% do faturamento</strong></p>
</blockquote>

<hr>

<h2>Sumário Executivo</h2>

<table>
<thead>
<tr><th>Área</th><th>Problema</th><th>Solução</th><th>Impacto</th></tr>
</thead>
<tbody>
<tr><td><strong>Comercial</strong></td><td>Concentração geográfica (SP 72% vendas)</td><td>Expansão para regiões subexploradas</td><td><strong>+15% GMV</strong> potencial</td></tr>
<tr><td><strong>Marketing</strong></td><td>Baixo LTV médio (R$ 173) vs Campeões (R$ 569)</td><td>Foco em categorias de alta conversão</td><td><strong>LTV 3x maior</strong> para novos clientes</td></tr>
<tr><td><strong>Operacional</strong></td><td>Atrasos críticos em cidades específicas (34,48%)</td><td>Otimização de rotas logísticas</td><td><strong>-50% atrasos</strong> em regiões problema</td></tr>
</tbody>
</table>

<hr>

<h2>Dashboards & Insights Reais</h2>

<h3>Dashboard Comercial - <strong>GMV: R$ 16,57 Mi</strong></h3>
<p><strong>KPIs Principais:</strong></p>
<ul>
<li><strong>101.720 pedidos</strong> processados</li>
<li><strong>Ticket médio: R$ 170,55</strong></li>
<li><strong>Apenas 0,54% de cancelamentos</strong> (excelente)</li>
<li><strong>Inadimplência mínima: 0,38%</strong></li>
</ul>

<p><strong>Insights Estratégicos:</strong><br>
TOP 5 CATEGORIAS (40% FATURAMENTO)</p>
<p>Beleza e Saúde - R$ 1,46M<br>
Relógios e Presentes - R$ 1,32M<br>
Cama, Mesa e Banho - R$ 1,29M<br>
Esporte e Lazer - R$ 1,16M<br>
Informática - R$ 1,07M</p>

<p><strong>Distribuição Geográfica:</strong></p>
<ul>
<li><strong>SP domina</strong> com cidades como Guariba, Itaquaquecetuba no top 5</li>
<li><strong>BA aparece</strong> com Lauro de Freitas (2º lugar - R$ 253,82K)</li>
<li><strong>Oportunidade:</strong> Expansão para outras regiões</li>
</ul>
<img width="1366" height="768" alt="image" src="https://github.com/user-attachments/assets/619c11ff-cc02-488d-b60f-07bda8dfaa86" />


<h3>Dashboard Marketing - <strong>LTV: R$ 173,40</strong></h3>
<p><strong>Segmentação RFM Descoberta:</strong></p>

<table>
<thead>
<tr><th>Segmento</th><th>Clientes</th><th>LTV Médio</th><th>Recência</th></tr>
</thead>
<tbody>
<tr><td>Campeões</td><td>150</td><td><strong>R$ 569</strong></td><td>34 dias</td></tr>
<tr><td>Leais</td><td>635</td><td>R$ 287,19</td><td>71 dias</td></tr>
<tr><td>Novos</td><td>11.390</td><td>R$ 168,32</td><td>33 dias</td></tr>
<tr><td>Regulares</td><td>25.528</td><td>R$ 175,12</td><td>123 dias</td></tr>
<tr><td>Inativos</td><td>57.767</td><td>R$ 171,37</td><td>341 dias</td></tr>
</tbody>
</table>

<p><strong>Insights Críticos:</strong></p>
<ul>
<li><strong>150 clientes "Campeões"</strong> geram valor desproporcional</li>
<li><strong>57.767 clientes inativos</strong> (60% da base) - oportunidade de reativação</li>
<li><strong>LTV dos Campeões é 3,3x maior</strong> que a média</li>
</ul>
<img width="1366" height="768" alt="image" src="https://github.com/user-attachments/assets/108e3c76-2fe5-44fe-9b10-021938ff5f02" />

<h3>Dashboard Operacional - <strong>TME: 12 dias</strong></h3>
<p><strong>Performance Logística:</strong></p>
<ul>
<li><strong>93,45% entregas no prazo</strong> (excelente)</li>
<li><strong>Apenas 6,5% de atrasos</strong> - oportunidade de melhoria</li>
<li><strong>Custo frete médio: R$ 20,00</strong> por pedido</li>
<li><strong>SLA vendedor: 3 dias</strong> de preparação</li>
</ul>

<p><strong>Alertas Operacionais:</strong><br>
TOP CIDADES COM ATRASO CRÍTICO:</p>
<ul>
<li>Peary - 34,48% (16,2% do total)</li>
<li>Armação dos Búzios</li>
<li>Catu</li>
<li>Santa Inês</li>
<li>Butiama</li>
</ul>

<p><strong>Correlação Frete × Peso:</strong></p>
<ul>
<li><strong>Produtos 10kg+</strong>: Frete ~R$ 20</li>
<li><strong>Produtos 5-10kg</strong>: Frete ~R$ 15</li>
<li><strong>Otimização:</strong> Revisão de política de fretes para categorias específicas</li>
</ul>
<img width="1366" height="768" alt="image" src="https://github.com/user-attachments/assets/68acfa71-8082-4f44-9102-1497882f17c1" />

<hr>

<h2>Insights Acionáveis </h2>

<h3>Área Comercial</h3>
<p><strong>Insight:</strong> 5 categorias = 40% do faturamento (R$ 6,3M)<br>
<strong>Impacto:</strong> <strong>+8% GMV</strong> com melhor mix de produtos</p>

<h3>Área Marketing</h3>
<p><strong>Insight:</strong> Clientes "Campeões" têm LTV 3x maior (R$ 569 vs R$ 173)<br>
<strong>Impacto:</strong> <strong>+20% retenção</strong> nos top 150 clientes</p>

<h3>Área Operacional</h3>
<p><strong>Insight:</strong> Cidade "Peary" tem 34,48% de atrasos (16,2% do total)<br>
<strong>Impacto:</strong> <strong>-50% atrasos</strong> em 2 meses</p>

<hr>

<h2>Implementação Técnica</h2>
<h3>Schema Estrela (BigQuery)</h3>

<p><strong> Observação:</strong> O faturamento total (GMV = R$ 16,57M) é calculado diretamente a partir da soma de <code>price + freight_value</code> na tabela <code>fato_pedido</code>. Essa tabela representa o núcleo do <em>star schema</em>, centralizando as métricas de negócio e conectando-se às dimensões (clientes, produtos, vendedores, tempo, etc.).</p>

<pre><code>-- TABELA FATO PRINCIPAL (FATO_PEDIDO)
-- Modelo de dados central do schema estrela

CREATE OR REPLACE TABLE `olist-sandbox-portfolio.olist_analysis.fato_pedido` AS
SELECT 
    -- CHAVES PRIMÁRIAS E ESTRANGEIRAS
    oi.order_id,
    oi.order_item_id,
    oi.product_id,
    oi.seller_id,
    o.customer_id,
    c.customer_unique_id,
    
    -- MÉTRICAS FINANCEIRAS (COMERCIAL)
    oi.price as valor_produto,
    oi.freight_value as valor_frete,
    (oi.price + oi.freight_value) as GMV,  -- Soma usada para calcular o faturamento total
    op.payment_value as valor_pagamento,
    op.payment_type as tipo_pagamento,
    op.payment_installments as parcelas,
    
    -- DATAS PARA ANÁLISE TEMPORAL
    DATE(o.order_purchase_timestamp) as data_compra,
    DATE(o.order_approved_at) as data_aprovacao,
    DATE(o.order_delivered_carrier_date) as data_envio_transportadora,
    DATE(o.order_delivered_customer_date) as data_entrega_cliente,
    DATE(o.order_estimated_delivery_date) as data_estimada_entrega,
    
    -- CÁLCULOS DE TEMPO (OPERACIONAL)
    CASE 
        WHEN o.order_delivered_customer_date IS NOT NULL 
        AND o.order_purchase_timestamp IS NOT NULL
        THEN DATE_DIFF(
            DATE(o.order_delivered_customer_date), 
            DATE(o.order_purchase_timestamp), 
            DAY
        )
    END as tempo_entrega_total_dias,
    
    CASE 
        WHEN o.order_delivered_customer_date IS NOT NULL 
        AND o.order_approved_at IS NOT NULL
        THEN DATE_DIFF(
            DATE(o.order_delivered_customer_date), 
            DATE(o.order_approved_at), 
            DAY
        )
    END as tempo_aprovacao_entrega_dias,
    
    CASE 
        WHEN o.order_delivered_carrier_date IS NOT NULL 
        AND o.order_approved_at IS NOT NULL
        THEN DATE_DIFF(
            DATE(o.order_delivered_carrier_date), 
            DATE(o.order_approved_at), 
            DAY
        )
    END as tempo_preparacao_vendedor_dias,
    
    -- INDICADORES DE PERFORMANCE
    CASE 
        WHEN o.order_delivered_customer_date IS NOT NULL
        AND o.order_estimated_delivery_date IS NOT NULL
        AND DATE(o.order_delivered_customer_date) > DATE(o.order_estimated_delivery_date) 
        THEN 1 ELSE 0 
    END as indicador_atraso,
    
    CASE 
        WHEN o.order_status IN ('canceled', 'unavailable') 
        THEN 1 ELSE 0 
    END as indicador_problema,
    
    -- DIMENSÕES DO PRODUTO
    p.product_category_name,
    p.product_weight_g,
    p.product_length_cm,
    p.product_height_cm,
    p.product_width_cm,
    
    -- DIMENSÕES GEOGRÁFICAS
    c.customer_city as cidade_cliente,
    c.customer_state as estado_cliente,
    s.seller_city as cidade_vendedor,
    s.seller_state as estado_vendedor,
    
    -- DIMENSÕES DO PEDIDO E STATUS
    o.order_status as status_pedido,
    
    -- DADOS PARA ANÁLISE DE MARKETING (AVALIAÇÕES)
    r.string_field_1 as review_id,
    r.string_field_2 as order_id_review,
    r.string_field_3 as review_comment_title,
    r.string_field_4 as review_comment_message,
    CASE 
        WHEN r.string_field_5 IS NOT NULL 
        THEN DATE(PARSE_TIMESTAMP('%Y-%m-%d %H:%M:%S', r.string_field_5))
    END as data_avaliacao,
    
    CASE 
        WHEN r.string_field_5 IS NOT NULL 
        AND o.order_delivered_customer_date IS NOT NULL
        THEN DATE_DIFF(
            DATE(PARSE_TIMESTAMP('%Y-%m-%d %H:%M:%S', r.string_field_5)), 
            DATE(o.order_delivered_customer_date), 
            DAY
        )
    END as tempo_entrega_avaliacao_dias

FROM `olist-sandbox-portfolio.olist_analysis.order_items` oi
JOIN `olist-sandbox-portfolio.olist_analysis.orders` o 
    ON oi.order_id = o.order_id
JOIN `olist-sandbox-portfolio.olist_analysis.customers` c 
    ON o.customer_id = c.customer_id
JOIN `olist-sandbox-portfolio.olist_analysis.products` p 
    ON oi.product_id = p.product_id
JOIN `olist-sandbox-portfolio.olist_analysis.sellers` s 
    ON oi.seller_id = s.seller_id
LEFT JOIN `olist-sandbox-portfolio.olist_analysis.order_payments` op 
    ON oi.order_id = op.order_id
LEFT JOIN `olist-sandbox-portfolio.olist_analysis.order_reviews` r 
    ON oi.order_id = r.string_field_2;
</code></pre>

<h3>Resultados Quantificados</h3>
<p><strong>Impacto Comercial</strong><br>
GMV Total: R$ 16.570.000<br>
Oportunidade identificada: +R$ 2.485.500 (15%)<br>
Categorias estratégicas: 5 responsáveis por 40% do faturamento</p>

<p><strong>Eficiência Marketing</strong><br>
Clientes "Campeões": 150 (0,16% da base)<br>
Valor gerado: ≈ R$ 85.350 (LTV médio R$ 569)<br>
Oportunidade: Converter 5% dos "Regulares" em "Leais" = +R$ 223.000</p>

<p><strong>Otimização Operacional</strong><br>
Cidades críticas: 5 com taxa de atraso >30%<br>
Impacto potencial: Redução de 50% nos atrasos = +6.615 entregas no prazo<br>
Economia: Otimização de fretes pode reduzir custos em 15%</p>

<h3>Lições Aprendidas & Próximos Passos</h3>

<p><strong>O que Funcionou</strong><br>
Schema estrela permitiu análises complexas em segundos<br>
Segmentação RFM identificou os 150 clientes mais valiosos<br>
KPIs focados geraram insights acionáveis imediatos</p>

<p><strong>Próximas Etapas Recomendadas</strong><br>
Implementar programa de fidelidade para "Campeões"<br>
Otimizar rotas logísticas nas 5 cidades críticas<br>
Expandir campanhas para categorias subexploradas<br>
Automatizar alertas de performance para stakeholders</p>

<h3>Sobre o Projeto</h3>
<p><strong>Período:</strong> Novembro 2024<br>
<strong>Dataset:</strong> Olist E-commerce (101.720 pedidos, 95.420 clientes)<br>
<strong>Stack:</strong> BigQuery + SQL + Looker Studio<br>
<strong>Objetivo:</strong> Demonstrar análise estratégica com impacto mensurável</p>

<p><em>"Os dados mostram que focar nos 150 clientes 'Campeões' e otimizar as 5 cidades críticas pode gerar 80% do resultado com 20% do esforço."</em></p>
